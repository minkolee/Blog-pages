<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Vue写前端</title>
</head>
<body>
<p>Vuetify看了几天，发现先把组件过一遍，心里有数，就直接上吧。</p>
<ol>
    <li><a href="#con1">前端设计</a></li>
    <li><a href="#con2">Vuetify学习</a></li>
    <li><a href="#con21">Vuetify安装</a></li>
    <li><a href="#con3">FLEX BOX学习</a></li>
    <li><a href="#con31">FLEX容器</a></li>
    <li><a href="#con32">FLEX项目</a></li>
</ol>

<h1 id="con1" style="text-align: center;">前端设计</h1>

<h1>简单的View和组件设计</h1>
<p>简单想了一下流程，分开两个视图，一个是登录视图（路径为<code>/login</code>)，组件为登录表单；一个是展示投票页面的视图(路径为是根路径)，组件是投票表单+登录展示。</p>
<p>主要业务逻辑如下：</p>
<ol>
    <li>项目初始化
        <ol>
            <li>vuex从尝试从本地加载TOKEN和用户名</li>
        </ol>
    </li>
    <li>用户访问首页
        <ol>
            <li>before导航守卫判断vuex中是否有TOKEN，没有则转至登录视图
            <li>如果有TOKEN，向后端发送TOKEN获取投票信息
                <ol>
                    <li>正常获得响应，使用vote中的数据进行渲染--正常进入投票视图</li>
                    <li>出现401错误，表示TOKEN认证失败--转至登录视图</li>
                    <li>出现404错误，表示用户没有投过票。此时只渲染投票组件中投票部分，不展示投票数量，让用户进行投票之后再展示投票结果。</li>
                </ol>
            </li>
        </ol>
    </li>
    <li>用户访问登录视图
        <ol>
            <li>导航守卫不做任何验证-->所有用户都可以访问登录视图</li>
            <li>用户发送登录请求-->成功取得200响应-->将TOKEN和用户名，是否投票，上次投票日期等信息加载至Vuex并存储到本地存储中，然后转至首页。</li>
            <li>用户发送登录请求-->返回任何错误代码-->依然返回登录视图，但是需要通过SLOT插入错误信息。</li>
        </ol>
    </li>
    <li>用户选择了组件之后点击发送按钮
        <ol>
            <li>如果获取201响应，则表示成功进行投票。</li>
            <li>如果获取406页面，想办法在页面上提示每24小时只能投一次票，什么也不做，还是留在当前页面。</li>
            <li>如果获取401响应，表示TOKEN出现问题，将用户转至登录页面。</li>
        </ol>
    </li>
</ol>
<p>
    这样设计之后，Vue开发的过程在我脑子里基本形成了URL--》视图逻辑--》载入数据--》分发给组件。仔细想了一下，其实和后端有异曲同工之妙，因为前端切换视图在传统后端里等于访问不同的URL，自然就是加载数据的过程，然后把数据放到页面上渲染出来的过程，就是载入数据然后分发给组件进行渲染的过程。</p>
<p>一对比，前端的逻辑就清晰好多了。</p>
<p>不过实际编写的时候，发现细节问题还是很多，所以决定重构一下后端，将所有的请求放行到控制器中来进行处理，这样可以比较方便的处理跨域问题，同时使用Spring Security来简单允许跨域。</p>




</body>
</html>
