<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../Spring%20in%20Action%205/base.css">
    <title>Vue 10 Vue工程项目</title>
    <script src="vuejs实战/vue.js"></script>
</head>
<body>
<p>前端工程化之后，如果写Vue，就要搭建Vue工程项目。目前搭建工程项目有两种方法，一是采用Webpack自行搭建环境然后引入Vue，二是使用Vue-cil。</p>
<p>这里先用Webpack实验一下。</p>
<ol>
    <li><a href="#con1">Webpack基础环境+Vue相关Loader配置</a></li>
    <li><a href="#con2">单文件组件</a></li>
    <li><a href="#con3">createElement</a></li>
    <li><a href="#con4">事件修饰符和按键修饰符</a></li>
</ol>

<h1 id="con1">Webpack基础环境+Vue相关Loader配置</h1>
<p>在<a href="http://www.conyli.cc/archives/category/program/front-end/webpack" target="_blank">前端工程化</a>里搞定了Webpack的配置。现在需要配置Vue的工程文件了。
</p>
<p>一个Vue工程与普通Webpack工程的不同就是使用了<code>.vue</code>文件的单文件组件。所以需要一个对应的<a href="https://vue-loader.vuejs.org/zh/"
                                                                    target="_blank">vue-loader</a>来解析单文件组件。</p>
<p>创建<code>Vue</code>工程之前，先按照普通创建好Webpack 4 + Babel 7 +
    PostCSS的环境，然后是一个仅带有一个<code>div#app</code>的<code>index.html</code>。为了突出结果，就直接使用默认的入口和出口。</p>
<h3><code>vue-loader</code></h3>
<p>为了解析单文件组件，需要先安装<code>vue-loader</code>，：</p>
<pre>npm install -D vue-loader vue-template-compiler</pre>
<p>这是根据官网的v15版最新文档，升级Vue包就需要升级对应的<code>vue-template-compiler</code>。</p>
<p>最后别忘记还需要安装Vue本身：<code>npm i -D vue</code></p>
<p>最后实际安装的版本如下：</p>
<pre>
"vue": "^2.6.10",
"vue-loader": "^15.7.0",
"vue-template-compiler": "^2.6.10",
</pre>
<p>配置可以参考NPM上的<a href="https://www.npmjs.com/package/vue-loader" target="_blank">vue-loader</a>和上边的<a
        href="https://vue-loader.vuejs.org/zh/" target="_blank">vue-load文档：</a></p>
<pre>
const path = require('path');
const ExtractPlugin = require('mini-css-extract-plugin');
const VueLoaderPlugin = require('vue-loader/lib/plugin');


module.exports = {
    //设置模式，可以是development或者production
    mode: "development",

    // 入口和输出部分使用默认
    // 入口默认值 = ./src/index.js
    // 输出默认值 = ./dist/main.js

    //loader部分
    module: {
        rules: [
            {
                //匹配CSS文件类型
                test: /\.css$/,
                //调用了新的插件的方法，这里使用了css-loader
                use: [
                    {
                        loader: ExtractPlugin.loader,
                    },
                    {
                        loader: 'css-loader',
                        options: {
                            importLoaders: 1,
                        }
                    },
                    {
                        loader: 'postcss-loader'
                    }
                ]
            },
            //匹配JS文件的loader
            {
                test: /\.js$/,
                exclude: /(node_modules|bower_components)/,
                use: {
                    loader: 'babel-loader',
                    options: {
                        presets: ['@babel/preset-env']
                    }
                }
            },

            //匹配vue文件的loader
            {
                test:/\.vue$/,
                loader: 'vue-loader'
            }
        ]
    },

    // 插件部分
    plugins: [
        new ExtractPlugin({
            filename: "[name].css"
        }),

        new VueLoaderPlugin()
    ]
};
</pre>
<p>其他配置先不改，写一个单文件组件来试试看能不能解析。</p>

<h1 id="con2">单文件组件</h1>
<p>什么是<a href="https://cn.vuejs.org/v2/guide/single-file-components.html"
         target="_blank">单文件组件</a>，其实就是一个以<code>.vue</code>结尾的文件，类似于一个HTML文件。其中的结构如下：</p>
<pre>
&lt;template>
    &lt;p>Hello {{ person }}&lt;/p>
&lt;/template>
&lt;script>
    module.exports = {
        data:function () {
            return {
                person: "jenny"
            }
        }
    }
&lt;/script>
&lt;style scoped>
    p {
        font-size: 2em;
        color: orange;
    }
&lt;/style>
</pre>
<p>这实际上就是把一个组件的内容和对应的样式重新组织。其中：</p>
<ol>
    <li><code>template</code>元素内是模板，无需转义拼接字符串，也不像使用x-template那么繁琐，就像普通HTML一样书写。</li>
    <li><code>script</code>元素内是组件的代码，默认返回一个对象，这个对象就是注册组件的时候传入的对象，其中的所有写法都和注册组件是一样的。</li>
    <li><code>style</code>元素是组件的样式。这里需要特别注意属性上的<code>scoped</code>，表示该样式仅对该组件生效。如果不写<code>scoped</code>，样式就是全局生效。</li>
</ol>
<p>在单页面应用中，一般页面上只有一个<code>div#app</code>，在项目的<code>main.js</code>文件中，一般会创建一个绑定到该div元素的Vue实例，作为项目的根实例，也就是入口。再通过这个根实例加载其他的组件使用。这样就像写后端一样，一个组件就是一个对象，通过props，slot和事件三种API进行交互，共同构成复杂的应用。</p>
<p>来编写简单的组件来试验一下前边的配置是否成功：</p>

















</body>
</html>